# [nohup启动jar包的参数解释](https://www.cnblogs.com/zjfjava/p/12563755.html)



在刚开始部署及测试SpringBoot打包的jar包时，常会将jar包抛到服务器上，直接运行 `java -jar` 命令来启动。但这样的话，该会话的终端窗口如果中断，程序也会挂掉，所以我们会采用nohup和&组合命令来操作。

**使用nohup运行程序：**

- 结果默认会输出到nohup.out
- 使用`Ctrl + C`发送==SIGINT==信号，程序关闭
- 关闭session（关闭shell）发送==SIGHUP==信号，程序免疫

**使用&后台运行程序：**

- 结果会输出到终端
- 使用`Ctrl + C`发送==SIGINT==信号，程序免疫
- 关闭session（关闭shell）发送==SIGHUP==信号，程序关闭

```sh
nohup java -jar app.jar &
```

这种方式启动项目会默认生成一个nohup.out的文件来记录日志，而且这个文件太占磁盘空间，所以为了减少磁盘被大量消耗，设置启动项目时不输出nohup.out文件。

可以采用如下两种方式：

```shell
# 把标准输出重定向到空设备，即只输出错误信息到日志文件
nohup java -jar app.jar >/dev/null 2>log & 
# 把标准输出和标准错误全重定向到空设备，即不输出日志
nohup java -jar app.jar >/dev/null 2>&1 & 
```

两个shell语法的解释：

**1.  >/dev/null**

这条命令的作用是将标准输出1重定向到==/dev/null==中。 ==/dev/null==代表linux的空设备文件，所有往这个文件里面写入的内容都会丢失，俗称“黑洞”。那么执行了==>/dev/null==之后，标准输出就会不再存在，没有任何地方能够找到输出的内容。

**2.  2>&1**

这条命令用到了重定向绑定，采用&可以将两个输出绑定在一起。这条命令的作用是错误输出将和标准输出同用一个文件描述符，说人话就是错误输出将会和标准输出输出到同一个地方。

linux在执行shell命令之前，就会确定好所有的输入输出位置，并且从左到右依次执行重定向的命令，所以>/dev/null 2>&1的作用就是让标准输出重定向到/dev/null中（丢弃标准输出），然后错误输出由于重用了标准输出的描述符，所以错误输出也被定向到了/dev/null中，错误输出同样也被丢弃了。执行了这条命令之后，该条shell命令将不会输出任何信息到控制台，也不会有任何信息输出到文件中。

 

**文件描述符**

当执行shell命令时，会默认打开3个文件，每个文件有对应的文件描述符来方便我们使用：

|            类型             | 文件描述符 |        默认情况        | 对应文件句柄位置 |
| :-------------------------: | :--------: | :--------------------: | :--------------: |
| 标准输入（standard input）  |     0      |     从键盘获得输入     | /proc/self/fd/0  |
| 标准输出（standard output） |     1      | 输出到屏幕（即控制台） | /proc/self/fd/1  |
|  错误输出（error output）   |     2      | 输出到屏幕（即控制台） | /proc/self/fd/2  |

**控制输出的命令**

所以我们平时在执行shell命令中，都默认是从键盘获得输入
，并且将结果输出到控制台上。但是我们可以通过更改文件描述符默认的指向，从而实现输入输出的重定向。比如我们将1指向文件，那么标准的输出就会输出到文件中。

| 命令                  | 介绍                       |
| :-------------------- | :------------------------- |
| command > filename    | 把标准输出重定向到新文件中 |
| command 1 > filename  | 同上                       |
| command >> filename   | 把标准输出追加到文件中     |
| command 1 >> filename | 同上                       |
| command 2 > filename  | 把标准错误重定向到新文件中 |
| command 2 >> filename | 把标准错误追加到新文件中   |



参考：

https://www.xuebuyuan.com/3222125.html

https://blog.csdn.net/it_erge/article/details/90799556